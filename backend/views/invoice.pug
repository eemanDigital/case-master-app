doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    title Professional Invoice
    style.
      body {
        font-family: "monospace", Georgia, serif;
        line-height: 1.6;
        color: #222;
        margin: 0;
        padding: 0;
        background: #fafafa;
      }
      .container {
        max-width: 900px;
        margin: 30px auto;
        padding: 40px;
        background: #fff;
        box-shadow: 0 0 10px rgba(0,0,0,0.08);
        border: 1px solid #ddd;
      }
      .header {
        border-bottom: 2px solid #444;
        padding-bottom: 15px;
        margin-bottom: 25px;
        text-align: center;
      }
      .header h1 {
        margin: 10px 0 0;
        font-size: 24pt;
        color: #222;
        letter-spacing: 1px;
      }
      .header p {
        margin: 3px 0;
        font-size: 11pt;
        color: #555;
      }
      .invoice-details {
        display: flex;
        justify-content: space-between;
        margin-bottom: 30px;
        font-size: 11.5pt;
      }
      .invoice-details h2 {
        margin-bottom: 8px;
        font-size: 13pt;
        color: #444;
        border-bottom: 1px solid #ccc;
        padding-bottom: 4px;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin: 15px 0 25px;
        font-size: 11pt;
      }
      th, td {
        padding: 10px 12px;
        border: 1px solid #ddd;
      }
      th {
        background-color: #f5f5f5;
        font-weight: bold;
        text-align: left;
        color: #333;
      }
      .total-row td {
        font-weight: bold;
        background-color: #f9f9f9;
      }
      .additional-info {
        background-color: #fdfdfd;
        border: 1px solid #eee;
        padding: 15px;
        border-radius: 4px;
        margin-top: 10px;
        font-size: 11pt;
      }
      .additional-info h2 {
        font-size: 13pt;
        margin-bottom: 10px;
        color: #444;
      }
      .payment-instructions {
        margin-top: 25px;
        padding: 18px;
        background-color: #f7fbff;
        border: 1px solid #d6e9f9;
        border-radius: 5px;
        font-size: 11pt;
      }
      .payment-instructions h3 {
        margin-top: 0;
        font-size: 12.5pt;
        color: #333;
      }
      @media (max-width: 600px) {
        .container {
          padding: 20px;
        }
        .invoice-details {
          flex-direction: column;
        }
        .invoice-details > div {
          margin-bottom: 20px;
        }
        table {
          font-size: 10pt;
        }
      }

  body
    .container
      .header
        //- logo could be added here if available
        h1 A.T Lukman & Co.
        p Lawyers, Solicitors & Advocates
        p No 32, Allen Street, Maitama, Abuja
        p Phone: +234 123 456 7890 | Email: info@atlukman.com

      .invoice-details
        div
          h2 Invoice To:
          p
            strong #{invoice.client.firstName} #{invoice.client.lastName}
            br
            | #{invoice.client.address}
            br
            | Phone: #{invoice.client.phone}
            br
            | Email: #{invoice.client.email}
        div
          h2 Invoice Details:
          p
            | Invoice No: #{invoice.invoiceReference}
            br
            | Invoice Date: #{new Date(invoice.createdAt).toLocaleDateString()}
            br
            | Due Date: #{invoice.dueDate ? new Date(invoice.dueDate).toLocaleDateString() : 'N/A'}

      .additional-info
        p
          strong Status: 
          | #{invoice.status}
        p
          strong Work Title: 
          | #{invoice.workTitle}
        p
          strong Case: 
          | #{invoice.case.firstParty.name[0].name || 'Unknown'} vs #{invoice.case.secondParty.name[0].name || 'Unknown'}

      h2 Services
      table
        thead
          tr
            th Service Description
            th Hours
            th Date
            th Fee Rate per Hour
            th Amount
        tbody
          each service in invoice.services
            tr
              td= service.serviceDescriptions
              td= service.hours
              td= new Date(service.date).toLocaleDateString()
              td ₦#{service.feeRatePerHour ? service.feeRatePerHour.toFixed(2) : '0.00'}
              td ₦#{service.amount.toFixed(2)}

      h2 Expenses
      table
        thead
          tr
            th Expense Description
            th Amount
            th Date
        tbody
          each expense in invoice.expenses
            tr
              td= expense.description
              td ₦#{expense.amount.toFixed(2)}
              td= new Date(expense.date).toLocaleDateString()

      .additional-info
        h2 Financial Summary
        table
          tr
            td Amount Already Paid:
            td ₦#{invoice.amountPaid.toFixed(2)}
          tr
            td Total Hours:
            td= invoice.totalHours
          tr
            td Total Professional Fees:
            td ₦#{invoice.totalProfessionalFees.toFixed(2)}
          tr
            td Total Expenses:
            td ₦#{invoice.totalExpenses.toFixed(2)}
          tr
            td Tax Amount (#{invoice.taxType}):
            td ₦#{invoice.taxAmount.toFixed(2)}
          tr
            td Total Amount With Tax:
            td ₦#{invoice.totalAmountWithTax.toFixed(2)}
          tr
            td Previous Balance:
            td ₦#{invoice.previousBalance.toFixed(2)}
          tr.total-row
            td Total Invoice Amount:
            td ₦#{invoice.totalInvoiceAmount.toFixed(2)}
          tr.total-row
            td Total Amount Due:
            td ₦#{invoice.totalAmountDue.toFixed(2)}

      .payment-instructions
        h3 Payment Instructions:
        p
          | Account No: #{invoice.accountDetails.accountNumber}
          br
          | Account Name: #{invoice.accountDetails.accountName}
          br
          | Bank: #{invoice.accountDetails.bank}
          br
          | Reference: #{invoice.accountDetails.reference}
        h3 Terms and Conditions:
        p= invoice.paymentInstructionTAndC
